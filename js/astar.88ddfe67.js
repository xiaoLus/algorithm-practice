(function(t){function e(e){for(var n,c,s=e[0],a=e[1],u=e[2],f=0,d=[];f<s.length;f++)c=s[f],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&d.push(i[c][0]),i[c]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);h&&h(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,s=1;s<r.length;s++){var a=r[s];0!==i[a]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},i={astar:0},o=[];function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/algorithm-practice/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var h=a;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("9841")},9841:function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),i=r("7591"),o=r.n(i),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[t._m(0),r("v-stage",{attrs:{config:t.configStage}},[r("v-layer",{on:{mousedown:function(e){t.left_button_down=!0},mouseup:function(e){t.left_button_down=!1}}},t._l(t.rectList,function(e,n){return r("v-rect",{key:n,ref:"rect"+e.w+"_"+e.h,refInFor:!0,attrs:{config:e},on:{dblclick:function(r){return t.selectTargetNode(e)},mouseover:function(r){return t.selectBarrier(e)}}})}),1)],1),r("br"),r("button",{on:{click:t.init}},[t._v("init")]),r("span",{staticStyle:{margin:"0 30px"}}),r("button",{on:{click:t.start}},[t._v("start")])],1)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[r("pre",[t._v("      A*寻路最基础版\n      双击: 选择起点和终点\n      按住左键滑动: 选择障碍物路线\n      start按钮: 开始计算路线\n    ")])])}],a=(r("8e6e"),r("456d"),r("ac6a"),r("20d6"),r("6c7b"),r("bd86")),u=(r("96cf"),r("3b8d")),h=r("d225"),f=r("b0b4");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(r,!0).forEach(function(e){Object(a["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var p=function(){function t(e,r,n,i){Object(h["a"])(this,t),this.startNode=e[0],this.endNode=e[1],this.barrierList=r,this.rangeX=n,this.rangeY=i,this.openList={},this.closeList={},this.UNIT_STRAIGHT=10,this.goIndex=0}return Object(f["a"])(t,[{key:"run",value:function(){var t="x".concat(this.startNode.x,"y").concat(this.startNode.y);this.openList[t]=l({},this.startNode,{},{node:t,preNode:-1,G:this.getDistance(this.startNode,this.endNode),evaluate:this.getDistance(this.startNode,this.endNode),done:0,closed:!1});var e=this.go(),r={},n=l({},e);while(n.preNode&&-1!=n.preNode)r[n.node]=n,n=n.preNode;return r}},{key:"go",value:function(){return this.updateNode(),this.openList[this.endNode.node]?(this.closeList[this.endNode.node]=l({},this.openList[this.endNode.node],{closed:!0}),delete this.openList[this.endNode.node],this.closeList[this.endNode.node]):this.go()}},{key:"createRoundNodeList",value:function(t){for(var e={},r=-1;r>=-1&&r<=1;r++)if(0!=r&&"barrier"!=this.barrierList["x".concat(t.x+r,"y").concat(t.y)]){var n={x:t.x+r,y:t.y};if(!(n.x<0||n.x>=this.rangeX)){var i={x:n.x,y:n.y,node:"x".concat(n.x,"y").concat(n.y),preNode:t,evaluate:this.getDistance(n,this.endNode),done:t.done+this.UNIT_STRAIGHT,G:-1,closed:!1};i.G=i.evaluate+i.done,e["x".concat(n.x,"y").concat(n.y)]=i}}for(var o=-1;o>=-1&&o<=1;o++)if(0!=o&&"barrier"!=this.barrierList["x".concat(t.x,"y").concat(t.y+o)]){var c={x:t.x,y:t.y+o};if(!(c.y<0||c.y>=this.rangeY)){var s={x:c.x,y:c.y,node:"x".concat(c.x,"y").concat(c.y),preNode:t,evaluate:this.getDistance(c,this.endNode),done:t.done+this.UNIT_STRAIGHT,G:-1};s.G=s.evaluate+s.done,e["x".concat(c.x,"y").concat(c.y)]=s}}return e}},{key:"updateNode",value:function(){var t=this,e=this.searchMinNode(),r=this.createRoundNodeList(e);Object.keys(r).forEach(function(e){var n=r[e];t.closeList[e]&&1==t.closeList[e].closed||(t.openList[e]?t.openList[e].G>n.G?t.openList[e]=l({},n):t.openList[e].G==n.G&&t.openList[e].evaluate>n.evaluate&&(t.openList[e]=l({},n)):t.openList[e]=l({},n))}),this.closeList[e.node]=l({},this.openList[e.node],{closed:!0}),delete this.openList[e.node]}},{key:"searchMinNode",value:function(){var t=this,e={};return Object.keys(this.openList).forEach(function(r){e.G?t.openList[r].G<e.G&&(e=t.openList[r]):e=t.openList[r]}),e}},{key:"getDistance",value:function(t,e){return this.UNIT_STRAIGHT*(Math.abs(t.x-e.x)+Math.abs(t.y-e.y))}}]),t}(),y=p;function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(r,!0).forEach(function(e){Object(a["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var g=20,w=20,x=40,O=30,L="#eee",N="#ccc;",m="#f3f",j="#333",_="#ff6",k={name:"app",components:{},created:function(){this.init()},computed:{configStage:function(){return{width:x*g,height:O*w}}},data:function(){return{rectList:{},barrierList:{},targetNodeList:[],left_button_down:!1}},methods:{init:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.RectInit();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),RectInit:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,r,n,i,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.resetData();case 2:for(e={},r=0;r<O;r++)for(n=0;n<x;n++)i=P({w:n,h:r,color:L}),e["x".concat(n,"y").concat(r)]=v({},i);return this.rectList=e,t.abrupt("return",new Promise(function(t){o.$nextTick(function(){o.drawStage(),t()})}));case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),resetData:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.rectList={},this.barrierList={},this.targetNodeList=[];case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),start:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(2==this.targetNodeList.length){t.next=3;break}return alert("The number of pink nodes must be 2 !"),t.abrupt("return");case 3:e=new y(this.targetNodeList,this.barrierList,x,O),r=e.run(),this.drawPath(r);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),selectTargetNode:function(t){while(this.targetNodeList.length>=2){var e=this.targetNodeList.shift();this.getRect(e.x,e.y).fill(L)}this.targetNodeList.push({node:"x".concat(t.w,"y").concat(t.h),x:t.w,y:t.h}),this.removeBarrier(t.w,t.h),t.fill=m},selectBarrier:function(t){this.left_button_down&&(t.fill=j,this.$set(this.barrierList,"x".concat(t.w,"y").concat(t.h),"barrier"),this.removeTargetNode(t.w,t.h))},removeTargetNode:function(t,e){var r=this.targetNodeList.findIndex(function(r){return r.x==t&&r.y==e});-1!=r&&this.targetNodeList.splice(r,1)},removeBarrier:function(t,e){this.barrierList["x".concat(t,"y").concat(e)]&&(delete this.barrierList["x".concat(t,"y").concat(e)],this.getRect(t,e).fill(L))},getRect:function(t,e){var r="rect"+t+"_"+e;return this.$refs[r][0].getNode()},drawStage:function(){for(var t=0;t<this.Y_AMOUNT;t++)for(var e=0;e<this.X_AMOUNT;e++)this.rectList["x".concat(e,"y").concat(t)].fill=L},drawPath:function(t){var e=this;Object.keys(t).forEach(function(r){var n=t[r];e.rectList["x".concat(n.x,"y").concat(n.y)].fill=_})}}};function P(t){return{w:t.w,h:t.h,x:t.w*g,y:(O-t.h-1)*w,width:g,height:w,fill:t.color,stroke:N,strokeWidth:1}}var T=k,R=r("2877"),S=Object(R["a"])(T,c,s,!1,null,"04c0736a",null),G=S.exports;n["default"].use(o.a),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(G)}}).$mount("#app")}});
//# sourceMappingURL=astar.88ddfe67.js.map